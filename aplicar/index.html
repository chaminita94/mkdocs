
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../permisos_especials/">
      
      
        <link rel="next" href="../sistemes_fitxers/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Aplicarció de Permisos Especial i ACL - Virtualització</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#demostracio-de-permisos-amb-chown-chgrp-i-chmod" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Virtualització" class="md-header__button md-logo" aria-label="Virtualització" data-md-component="logo">
      
  <img src="../linux-ethandud.gif" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Virtualització
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Aplicarció de Permisos Especial i ACL
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../objectius/" class="md-tabs__link">
        
  
    
  
  Per què triar Linux?

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Typeracer.html" class="md-tabs__link">
        
  
    
  
  Typeracer

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../instalacio_inicial/" class="md-tabs__link">
          
  
  Sprint 1

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../fitx_importants/" class="md-tabs__link">
          
  
  Sprint 2

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../ldap/" class="md-tabs__link">
          
  
  Sprint 3

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../licencia/" class="md-tabs__link">
          
  
  Licència

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../customize/" class="md-tabs__link">
        
  
    
  
  Customize your MKDOCS

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Virtualització" class="md-nav__button md-logo" aria-label="Virtualització" data-md-component="logo">
      
  <img src="../linux-ethandud.gif" alt="logo">

    </a>
    Virtualització
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../objectius/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Per què triar Linux?
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Typeracer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Typeracer
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sprint 1
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sprint 1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../instalacio_inicial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instalació Inicial Usuari Avançat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuració Inicial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../netplan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuració de Xarxa
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bootloaders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gestors D'arrancada
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../grub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reparació d'inici
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../timeshift/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creació d'una instantània del sistema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../comandes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comandes bàssiques
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../packet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fixació de Paquets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Sprint 2
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Sprint 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fitx_importants/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fitxers Importants
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gestio_usuaris/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gestió d'Usuaris
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gestproces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gestió de Processos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../permisos_especials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permisos Especials i ACL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Aplicarció de Permisos Especial i ACL
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Aplicarció de Permisos Especial i ACL
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#demostracio-de-permisos-amb-chown-chgrp-i-chmod" class="md-nav__link">
    <span class="md-ellipsis">
      Demostració de Permisos amb chown, chgrp i chmod
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprovacio" class="md-nav__link">
    <span class="md-ellipsis">
      Comprovació
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esborrat-de-fitxers-i-directoris" class="md-nav__link">
    <span class="md-ellipsis">
      Esborrat de fitxers i directoris
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#herencia-de-grup" class="md-nav__link">
    <span class="md-ellipsis">
      Herència de Grup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Herència de Grup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#com-funciona-chmod-2770" class="md-nav__link">
    <span class="md-ellipsis">
      Com funciona chmod 2770?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beneficis-de-chmod-2770" class="md-nav__link">
    <span class="md-ellipsis">
      Beneficis de chmod 2770
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#situacions-recomanades-per-utilitzar-aquesta-configuracio" class="md-nav__link">
    <span class="md-ellipsis">
      Situacions recomanades per utilitzar aquesta configuració
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Situacions recomanades per utilitzar aquesta configuració">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#acl" class="md-nav__link">
    <span class="md-ellipsis">
      ACL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permisos-actuals-de-carpeta1" class="md-nav__link">
    <span class="md-ellipsis">
      Permisos actuals de carpeta1
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Permisos actuals de carpeta1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#permisos-del-directori" class="md-nav__link">
    <span class="md-ellipsis">
      Permisos del directori
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permisos-predeterminats-per-a-nous-fitxers" class="md-nav__link">
    <span class="md-ellipsis">
      Permisos predeterminats per a nous fitxers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comprovacio-de-les-acl" class="md-nav__link">
    <span class="md-ellipsis">
      Comprovació de les ACL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verificacio-de-permisos-acl" class="md-nav__link">
    <span class="md-ellipsis">
      Verificació de permisos ACL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sticky-bit" class="md-nav__link">
    <span class="md-ellipsis">
      Sticky Bit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sticky Bit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-es-el-sticky-bit" class="md-nav__link">
    <span class="md-ellipsis">
      Què és el Sticky Bit?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#com-funciona" class="md-nav__link">
    <span class="md-ellipsis">
      Com funciona?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exemple-practic" class="md-nav__link">
    <span class="md-ellipsis">
      Exemple pràctic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#que-es-umask" class="md-nav__link">
    <span class="md-ellipsis">
      Què és umask?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Què és umask?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#com-funciona_1" class="md-nav__link">
    <span class="md-ellipsis">
      Com funciona?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#valors-predeterminats" class="md-nav__link">
    <span class="md-ellipsis">
      Valors predeterminats:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#per-que-es-important" class="md-nav__link">
    <span class="md-ellipsis">
      Per què és important?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Per què és important?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#canviar-umask-temporalment-i-crear-un-fitxer" class="md-nav__link">
    <span class="md-ellipsis">
      Canviar Umask temporalment i crear un fitxer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignacio-duna-umask-diferent" class="md-nav__link">
    <span class="md-ellipsis">
      Assignació d'una umask diferent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#que-es-sgid" class="md-nav__link">
    <span class="md-ellipsis">
      Què és SGID?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Què és SGID?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funcionament-amb-fitxers" class="md-nav__link">
    <span class="md-ellipsis">
      Funcionament amb fitxers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Funcionament amb fitxers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracio-de-sgid-en-un-fitxer" class="md-nav__link">
    <span class="md-ellipsis">
      Configuració de SGID en un fitxer:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcionament-amb-directoris" class="md-nav__link">
    <span class="md-ellipsis">
      Funcionament amb directoris
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Funcionament amb directoris">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracio-de-sgid-en-un-directori" class="md-nav__link">
    <span class="md-ellipsis">
      Configuració de SGID en un directori:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#que-es-suid" class="md-nav__link">
    <span class="md-ellipsis">
      Què és SUID?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Què és SUID?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exemple-dus-de-suid" class="md-nav__link">
    <span class="md-ellipsis">
      Exemple d'ús de SUID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passos-a-seguir" class="md-nav__link">
    <span class="md-ellipsis">
      Passos a seguir
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sistemes_fitxers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sistemes de Fitxers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../particions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gestió de Particions i Compartició de Recursos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../copies_segur/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Còpies de Seguretat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../anacron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automatitzacions de Tasques
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quotes_disc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quotes per a Usuaris i Grups
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sprint 3
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Sprint 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instal·lació DOMINI LDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client_ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuració del client LDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gestio_domini/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gestio del domini
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Licència
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Licència
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../licencia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Llicència d'us
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tipus-licencia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tipus de Llicències
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../customize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize your MKDOCS
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h2 id="demostracio-de-permisos-amb-chown-chgrp-i-chmod">Demostració de Permisos amb <code>chown</code>, <code>chgrp</code> i <code>chmod</code></h2>
<p>Per aquesta demostració, hem creat quatre usuaris per exemplificar com aplicar els permisos amb les comandes <code>chown</code>, <code>chgrp</code> i <code>chmod</code>.</p>
<p><img alt="Usuaris creats per a la demostració" src="../users.png" /></p>
<p>A més, hem creat un grup anomenat <strong>group1</strong> específicament per a aquesta demostració.</p>
<p><img alt="Grup creat per a la demostració" src="../groupperm.png" /></p>
<p><strong>Creació d'un Directori</strong></p>
<p>Comencem creant un nou directori que hem anomenat <strong>carpeta1</strong>.</p>
<pre><code>sudo mkdir carpeta1
</code></pre>
<p><strong>Assignació del Grup com a Propietari del Directori</strong></p>
<p>Afegim el <strong>group1</strong> com a propietari del directori <strong>carpeta1</strong> utilitzant <code>chgrp</code>.</p>
<pre><code>sudo chown :group1 carpeta1
</code></pre>
<p><img alt="Assignació del grup al directori carpeta1" src="../group1carpeta.png" /></p>
<p><strong>Assignació dels permisos del Directori</strong></p>
<p>En aquest cas assignem els permisos de 770</p>
<pre><code>sudo chmod 770
</code></pre>
<p><img alt="alt text" src="../chcarpeta1.png" /></p>
<p><strong>770 permet:</strong></p>
<blockquote>
<p>Usuari propietari: llegir, escriure i executar.</p>
<p>Grup: llegir, escriure i executar.</p>
<p>Altres: cap permís.</p>
</blockquote>
<h2 id="comprovacio">Comprovació</h2>
<p>Per verificar els permisos, entrem amb l'usuari <strong>user1</strong> i intentem accedir al directori <strong>carpeta1</strong>.</p>
<p><img alt="Accés denegat" src="../denied.png" /></p>
<p>Com es pot observar, l'accés és denegat. Això es deu al fet que l'usuari <strong>user1</strong> encara no forma part del grup <strong>Group1</strong> i, per tant, no té els permisos necessaris per accedir al directori.</p>
<p>Afegim els usuaris dins del group1</p>
<pre><code>sudo usermod -aG group1 user1
sudo usermod -aG group1 user2
</code></pre>
<p><img alt="alt text" src="../usermdgroup1.png" /></p>
<p>Comprovem que els usuaris estan dins del <strong>Group1</strong></p>
<pre><code>cat /etc/group | grep group1
</code></pre>
<p><img alt="alt text" src="../grp1user12.png" /></p>
<p>Entrem un altre cop amb l'usuari <strong>user1</strong> i intentem crear un fitxer i un directori.</p>
<p><img alt="Creació de fitxer i directori" src="../suser1.png" /></p>
<p>Com es pot observar, s'han creat correctament, i el propietari d'aquests fitxers és <strong>user1</strong>.</p>
<h2 id="esborrat-de-fitxers-i-directoris">Esborrat de fitxers i directoris</h2>
<p>Entrem amb l'usuari <strong>user2</strong> i intentem esborrar els directoris i fitxers.</p>
<p><img alt="Esborrat de fitxers" src="../esborar.png" /></p>
<p>Com es pot observar, els fitxers han estat esborrats. Aixó no és desitjable, ja que els fitxers eren propietat d'altres usuaris i haurien d'estar protegits.</p>
<blockquote>
<p>NOTA! La restricció dels fitxers la explicarem mes endavant.</p>
</blockquote>
<h1 id="herencia-de-grup">Herència de Grup</h1>
<p>El <strong>bit SGID (Set Group ID)</strong> és una característica del sistema de permisos en Linux que assegura que els fitxers i directoris creats dins d’un directori <strong>hereten el grup propietari del directori pare</strong> en lloc del grup predeterminat de l’usuari que els crea.</p>
<p><img alt="Herència de grup activada" src="../gr1d.png" /></p>
<hr />
<h2 id="com-funciona-chmod-2770">Com funciona <code>chmod 2770</code>?</h2>
<p><strong>Bit SGID (2):</strong></p>
<ul>
<li>
<p>Activa l'<strong>herència de grup</strong>, garantint que:</p>
</li>
<li>
<p>Els fitxers i directoris creats dins d’un directori amb SGID activat <strong>heretin automàticament el grup propietari</strong> del directori pare.</p>
</li>
<li>
<p>Això assegura que tots els fitxers i directoris dins del directori comparteixin el mateix grup, facilitant el treball col·laboratiu.</p>
</li>
</ul>
<hr />
<p><strong>Permisos 770:</strong></p>
<p>Configura els permisos del directori amb el següent significat:</p>
<ul>
<li>
<p><strong>7 (Propietari):</strong> Permet llegir, escriure i executar.</p>
</li>
<li>
<p><strong>7 (Grup):</strong> Permet als membres del grup llegir, escriure i executar.</p>
</li>
<li>
<p><strong>0 (Altres):</strong> No dona cap permís als usuaris que no són ni el propietari ni membres del grup.</p>
</li>
</ul>
<p>Amb aquests permisos:</p>
<ul>
<li>
<p>Només el propietari i els membres del grup poden accedir al directori o modificar el seu contingut.</p>
</li>
<li>
<p>Altres usuaris queden completament exclosos.</p>
</li>
</ul>
<hr />
<h2 id="beneficis-de-chmod-2770">Beneficis de <code>chmod 2770</code></h2>
<p><strong>Seguretat:</strong></p>
<ul>
<li>
<p>Es limita l’accés al directori exclusivament al propietari i als membres del grup.</p>
</li>
<li>
<p>Els usuaris no autoritzats no poden veure, modificar ni esborrar el contingut del directori.</p>
</li>
</ul>
<p><strong>Col·laboració:</strong></p>
<ul>
<li>L’herència de grup assegura que els fitxers i directoris creats dins del directori comparteixin el mateix grup, facilitant la col·laboració entre els membres.</li>
</ul>
<p><strong>Control:</strong></p>
<ul>
<li>Garanteix que només el propietari i els membres del grup tinguin permisos per gestionar els fitxers, mantenint una estructura de permisos clara i coherent.</li>
</ul>
<hr />
<h2 id="situacions-recomanades-per-utilitzar-aquesta-configuracio">Situacions recomanades per utilitzar aquesta configuració</h2>
<p>La configuració amb <strong>chmod 2770</strong> és especialment útil en entorns on:
- Diversos usuaris treballen conjuntament en un projecte.
- Els fitxers i directoris han de ser accessibles només per als membres del grup.
- És important mantenir la seguretat i coherència dels permisos en un entorn compartit.</p>
<p>Amb aquesta configuració, es pot assegurar un control adequat dels fitxers i una col·laboració eficaç en projectes d’equip.</p>
<h3 id="acl">ACL</h3>
<p><strong>Una ACL (Access Control List)</strong> és una llista que defineix permisos específics per a usuaris o grups sobre un fitxer o directori en sistemes operatius com Linux. A diferència dels permisos tradicionals de Linux (propietari, grup i altres), les ACL permeten una configuració més granular, com donar permisos diferents a usuaris o grups específics.</p>
<p><img alt="Exemple d'ACL" src="../acl.png" /></p>
<blockquote>
<p><strong>user1:</strong> Pot llegir, escriure i esborrar fitxers, ja que està al grup i no té restriccions addicionals.</p>
<p><strong>user2:</strong> Pot llegir i escriure fitxers dins de Carpeta1, però no pot esborrar-los perquè no és el propietari.</p>
</blockquote>
<hr />
<h3 id="permisos-actuals-de-carpeta1"><strong>Permisos actuals de <code>carpeta1</code></strong></h3>
<h4 id="permisos-del-directori"><strong>Permisos del directori</strong></h4>
<table>
<thead>
<tr>
<th><strong>Tipus</strong></th>
<th><strong>Usuari/Grup</strong></th>
<th><strong>Permisos</strong></th>
<th><strong>Descripció</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Propietari</strong></td>
<td><code>root</code></td>
<td><code>rwx</code></td>
<td>El propietari té permisos complets.</td>
</tr>
<tr>
<td><strong>Usuari específic</strong></td>
<td><code>user2</code></td>
<td><code>rw-</code></td>
<td>Pot llegir i escriure, però no executar ni esborrar.</td>
</tr>
<tr>
<td><strong>Grup</strong></td>
<td><code>group1</code></td>
<td><code>rwx</code></td>
<td>Els membres del grup tenen permisos complets.</td>
</tr>
<tr>
<td><strong>Mask</strong></td>
<td>-</td>
<td><code>rwx</code></td>
<td>Defineix el màxim permès pels ACLs.</td>
</tr>
<tr>
<td><strong>Altres</strong></td>
<td>-</td>
<td><code>---</code></td>
<td>Els altres usuaris no tenen cap accés.</td>
</tr>
</tbody>
</table>
<h4 id="permisos-predeterminats-per-a-nous-fitxers"><strong>Permisos predeterminats per a nous fitxers</strong></h4>
<table>
<thead>
<tr>
<th><strong>Tipus</strong></th>
<th><strong>Usuari/Grup</strong></th>
<th><strong>Permisos</strong></th>
<th><strong>Descripció</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Propietari</strong></td>
<td><code>root</code></td>
<td><code>rwx</code></td>
<td>Els nous fitxers tindran permisos complets per al propietari.</td>
</tr>
<tr>
<td><strong>Usuari específic</strong></td>
<td><code>user2</code></td>
<td><code>rw-</code></td>
<td>Els nous fitxers tindran permisos de lectura i escriptura, però no d'execució.</td>
</tr>
<tr>
<td><strong>Grup</strong></td>
<td><code>group1</code></td>
<td><code>rwx</code></td>
<td>Els nous fitxers tindran permisos complets per al grup.</td>
</tr>
<tr>
<td><strong>Mask</strong></td>
<td>-</td>
<td><code>rwx</code></td>
<td>Defineix el màxim permès pels ACLs predeterminats.</td>
</tr>
<tr>
<td><strong>Altres</strong></td>
<td>-</td>
<td><code>---</code></td>
<td>Els altres usuaris no tindran accés als nous fitxers.</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="comprovacio-de-les-acl"><strong>Comprovació de les ACL</strong></h4>
<p>Per verificar si s'ha aplicat correctament la configuració de la ACL, utilitzem la següent comanda:</p>
<pre><code>getfacl carpeta1/
</code></pre>
<h4 id="verificacio-de-permisos-acl">Verificació de permisos ACL</h4>
<p>La sortida hauria de mostrar els permisos configurats actualment per al directori:</p>
<p><img alt="Permisos ACL configurats" src="../aclshow.png" /></p>
<hr />
<p><strong>Pas 1: Crear un fitxer o directori amb <code>user1</code></strong></p>
<p>Entrem amb l'usuari <strong>user1</strong> i creem un directori o un fitxer dins de <code>carpeta1</code>.</p>
<p><img alt="Creació per user1" src="../usr1.png" /></p>
<hr />
<p><strong>Pas 2: Intentem accedir amb <code>user2</code></strong></p>
<p>Ara entrem amb l'usuari <strong>user2</strong> i intentem accedir a <strong>carpeta1</strong> o llegir els fitxers.</p>
<ul>
<li><strong>Resultat:</strong> No podem accedir al directori ni llegir els fitxers. Només podem veure que existeix la carpeta, però no tenim informació sobre els permisos ni el seu contingut.</li>
</ul>
<p><img alt="Accés denegat per user2" src="../cantread.png" /></p>
<hr />
<p><strong>Pas 3: Afegim permisos per a <code>user2</code> amb ACL</strong></p>
<p>Per permetre que <code>user2</code> pugui accedir a la carpeta, llegir i modificar fitxers, afegim permisos <strong>rwx</strong> (lectura, escriptura i execució) dins de l'ACL.</p>
<p><img alt="Permisos rwx per user2" src="../rwxuser2.png" /></p>
<pre><code>sudo setfacl -d -m u:user2:rwx carpeta1
</code></pre>
<pre><code>sudo setfacl -m u:user2:rwx carpeta1
</code></pre>
<blockquote>
<p>NOTA: <strong>Compte!</strong> Amb aquesta configuració, el <strong>user2</strong> pot llegir, escriure i també esborrar els fitxers dins de <code>carpeta1</code>. Per evitar que el <strong>user2</strong> pugui esborrar els fitxers d'altres usuaris, cal activar el <strong>Sticky Bit</strong>, com veurem a continuació.</p>
</blockquote>
<hr />
<h2 id="sticky-bit">Sticky Bit</h2>
<h3 id="que-es-el-sticky-bit">Què és el Sticky Bit?</h3>
<p>El <strong>Sticky Bit</strong> és una característica que s'utilitza en sistemes Linux per protegir els fitxers en directoris compartits. Quan s'activa, només el <strong>propietari del fitxer</strong> o un <strong>administrador</strong> pot esborrar-lo, encara que altres usuaris tinguin permisos d'escriptura al directori.</p>
<h3 id="com-funciona">Com funciona?</h3>
<p>En un directori compartit, com ara <code>/carpeta1</code>:
- Els usuaris poden crear i editar fitxers lliurement.
- Amb el <strong>Sticky Bit</strong>, un usuari no pot esborrar els fitxers d'altres usuaris, però sí els seus propis.</p>
<p>Per evitar que <code>user2</code> o qualsevol altre usuari pugui esborrar fitxers que no són seus, afegim el <strong>Sticky Bit</strong> al directori. Això assegura que només el propietari del fitxer o un administrador pot esborrar-lo.</p>
<p><img alt="Sticky Bit activat" src="../sticky.png" /></p>
<hr />
<h3 id="exemple-practic">Exemple pràctic</h3>
<p>Entrem amb el <strong>user1</strong>, creem un directori i un fitxer. Posteriorment, entrem amb el <strong>user2</strong> i intentem esborrar els fitxers de l'usuari <strong>user1</strong>, però no es poden esborrar per falta de permisos. Tot i això, podem crear fitxers propis dins del directori.</p>
<p><img alt="Intent d'esborrat i creació per user2" src="../lasttext.png" /></p>
<p><strong>Conclusió</strong></p>
<p>Amb aquesta configuració:
- <strong>user1</strong> pot crear fitxers i directoris, i només ell pot esborrar els seus fitxers.
- <strong>user2</strong> pot accedir, llegir i escriure fitxers dins de <code>/carpeta1</code>, però no pot esborrar els fitxers d'altres usuaris.</p>
<hr />
<h2 id="que-es-umask">Què és <code>umask</code>?</h2>
<p><strong>Umask</strong> és una configuració en sistemes Linux que controla els permisos que tindran els fitxers i directoris nous quan es creïn. En altres paraules, determina qui podrà accedir o modificar aquests fitxers o directoris per defecte.</p>
<h3 id="com-funciona_1">Com funciona?</h3>
<ul>
<li>Quan es crea un fitxer o directori nou, el sistema li assigna uns <strong>permisos predeterminats</strong>.</li>
<li><code>Umask</code> resta alguns permisos d'aquests valors predeterminats per garantir la seguretat i el control d'accés.</li>
</ul>
<h3 id="valors-predeterminats">Valors predeterminats:</h3>
<ul>
<li><strong>Fitxers:</strong> Els permisos inicials són <code>666</code> (lectura i escriptura per a tothom, però sense execució).</li>
<li><strong>Directoris:</strong> Els permisos inicials són <code>777</code> (lectura, escriptura i execució per a tothom).</li>
</ul>
<h3 id="per-que-es-important">Per què és important?</h3>
<p><code>Umask</code> ajuda a controlar la <strong>seguretat i la col·laboració</strong> en un sistema:
- <strong>Seguretat:</strong> Evita que altres usuaris tinguin accés complet als teus fitxers per defecte.
- <strong>Col·laboració:</strong> Permet ajustar els permisos perquè els membres del teu grup puguin treballar amb els teus fitxers si cal.</p>
<hr />
<h4 id="canviar-umask-temporalment-i-crear-un-fitxer">Canviar <code>Umask</code> temporalment i crear un fitxer</h4>
<p>Primeramen comprova el valor actual de la <code>Umask</code>:</p>
<p><strong>Comprovació de la <code>umask</code> actual:</strong>  </p>
<p><img alt="alt text" src="../umasuser2.png" /></p>
<blockquote>
<p>L'usuari <strong>user2</strong> té configurada la <code>umask</code> com <code>0002</code>, permetent que els fitxers nous siguin accessibles pel grup.</p>
<p><strong>Creació d'un fitxer:</strong>  </p>
<p><strong>user2</strong> crea un fitxer anomenat <code>umask.txt</code>.</p>
</blockquote>
<p><strong>Permisos del fitxer:</strong>  </p>
<p>En fer <code>ls -l</code>, els permisos són <code>-rw-rw----</code>, indicant que:</p>
<ul>
<li>
<p>El propietari i el grup poden llegir i escriure.</p>
</li>
<li>
<p>Altres no tenen cap accés.</p>
</li>
</ul>
<h4 id="assignacio-duna-umask-diferent">Assignació d'una <code>umask</code> diferent</h4>
<p>Assignem una <code>umask</code> més restrictiva i creem un fitxer anomenat <code>hello</code>.</p>
<pre><code>umask 0077
</code></pre>
<p><img alt="alt text" src="../touchumask.png" /></p>
<p><strong>Comprovació dels permisos:</strong>  </p>
<p>En fer <code>ls -l</code>, els permisos són <code>-rw-------</code>, indicant que:</p>
<ul>
<li>
<p>Només el propietari pot llegir i escriure.</p>
</li>
<li>
<p>El grup i altres no tenen cap accés.</p>
</li>
</ul>
<p><strong>Explicació:</strong></p>
<p>Amb la <code>umask</code> configurada com <code>0077</code>:</p>
<ul>
<li>
<p>Els fitxers són completament privats.</p>
</li>
<li>
<p>Aquesta configuració és útil per garantir la seguretat en fitxers sensibles.</p>
</li>
</ul>
<blockquote>
<p><strong>NOTA!</strong> La configuració de la <code>umask</code> no s'aplicarà si el directori on es creen els fitxers té permisos configurats amb ACLs. En aquest cas, els permisos dels fitxers i directoris nous heretaran les configuracions de l'ACL, independentment del valor de la <code>umask</code>.</p>
</blockquote>
<p><img alt="alt text" src="../heretat.png" /></p>
<h1 id="que-es-sgid">Què és SGID?</h1>
<p><strong>SGID</strong> (Set Group ID) és un permís especial en sistemes Unix/Linux que permet que un fitxer o directori hereti el grup propietari de l'arxiu o carpeta en lloc del grup de l'usuari que el va crear.</p>
<hr />
<h2 id="funcionament-amb-fitxers">Funcionament amb fitxers</h2>
<p>Quan un programa amb <strong>SGID</strong> s'executa, funciona amb els permisos del grup propietari del fitxer. Això és útil per assegurar que els processos heretin permisos del grup correcte.</p>
<h3 id="configuracio-de-sgid-en-un-fitxer">Configuració de SGID en un fitxer:</h3>
<p>chmod g+s fitxer</p>
<hr />
<h2 id="funcionament-amb-directoris">Funcionament amb directoris</h2>
<p>Quan <strong>SGID</strong> està activat en un directori, qualsevol fitxer creat dins d'aquest heretarà el grup propietari del directori en lloc del grup de l'usuari que el va crear. Això facilita la col·laboració en grups.</p>
<h3 id="configuracio-de-sgid-en-un-directori">Configuració de SGID en un directori:</h3>
<p>chmod g+s directori</p>
<hr />
<h3 id="notes">Notes</h3>
<ul>
<li>L'ús de <strong>SGID</strong> en directoris és especialment útil per a projectes col·laboratius, on diversos usuaris necessiten compartir fitxers dins d'un mateix grup.</li>
<li>
<p>Per eliminar el permís SGID d'un fitxer o directori:</p>
</li>
<li>
<p>chmod g-s fitxer_o_directori</p>
</li>
</ul>
<h2 id="que-es-suid">Què és SUID?</h2>
<p><strong>SUID</strong> (Set User ID) és un permís especial en sistemes Unix/Linux que permet que un programa s'executi amb els privilegis del propietari del fitxer, en lloc de l'usuari que l'executa. Això és útil per a certs programes que necessiten permisos elevats per funcionar correctament, com ara aquells que accedeixen a recursos restringits del sistema.</p>
<h3 id="exemple-dus-de-suid">Exemple d'ús de SUID</h3>
<p>En aquest exemple, veurem com configurar <strong>SUID</strong> per a un programa escrit en C, permetent a un usuari sense privilegis accedir al directori <code>/root</code>.</p>
<hr />
<h3 id="passos-a-seguir">Passos a seguir</h3>
<p><strong>Posar-se com a <code>root</code></strong></p>
<p>Primer, assegura't d'executar tots els passos següents com a usuari <code>root</code>:</p>
<pre><code>sudo su
</code></pre>
<hr />
<p><strong>Crear l'arxiu <code>script.c</code></strong></p>
<p>Crea un fitxer anomenat <code>script.c</code> i afegeix el següent codi:</p>
<pre><code>#include &lt;stdio.h&gt;  
#include &lt;dirent.h&gt;  

int main() {  
    struct dirent *entry;  
    DIR *dp = opendir(&quot;/root&quot;);  
    if (dp == NULL) {  
        perror(&quot;No s'ha pogut obrir /root&quot;);  
        return 1;  
    }  
    printf(&quot;Contingut de /root:\n&quot;);  
    while ((entry = readdir(dp))) {  
        printf(&quot;%s\n&quot;, entry-&gt;d_name);  
    }  
    closedir(dp);  
    return 0;  
}
</code></pre>
<p>Aquest codi intenta obrir el directori <code>/root</code> i llistar el seu contingut.</p>
<hr />
<p><strong>Compilar el codi</strong></p>
<p>Compila el codi per generar un executable:</p>
<pre><code>sudo gcc script.c -o script
</code></pre>
<hr />
<p><strong>Assignar permisos d'execució i SUID</strong></p>
<p>Ara, dona permisos d'execució al programa i configura <strong>SUID</strong>:</p>
<pre><code>sudo chmod +x script  
sudo chmod u+s script  
</code></pre>
<p><img alt="alt text" src="../script2.png" /></p>
<p>Amb aquests permisos, qualsevol usuari que executi aquest programa tindrà temporalment els privilegis de <code>root</code> per accedir al directori <code>/root</code>.</p>
<hr />
<p><strong>Provar amb un usuari sense privilegis</strong></p>
<p>Connecta't amb un usuari que no formi part del grup de sudoers, per exemple, un usuari anomenat <code>user1</code>:</p>
<p>su prova</p>
<p><strong>Executa l'script:</strong></p>
<pre><code>./script
</code></pre>
<p><img alt="alt text" src="../Scriptns.png" /></p>
<p>Si s'ha configurat correctament, l'usuari <code>user1</code> podrà veure el contingut del directori <code>/root</code>:</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.copy", "content.code.download", "footer.hide", "palette.toggle"], "search": "../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="../consent.js"></script>
      
        <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
      
    
  </body>
</html>